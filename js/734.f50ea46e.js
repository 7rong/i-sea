"use strict";(self["webpackChunki_sea"]=self["webpackChunki_sea"]||[]).push([[734],{8707:function(e,t,l){l.d(t,{Z:function(){return b}});var a=l(3396),o=l(7139),s=l(9242);const d={"aria-label":"Page navigation"},i={class:"pagination justify-content-center"},n=(0,a._)("span",{"aria-hidden":"true"},"«",-1),c=[n],r=["onClick"],p=(0,a._)("span",{"aria-hidden":"true"},"»",-1),u=[p];function m(e,t,l,n,p,m){return(0,a.wg)(),(0,a.iD)("nav",d,[(0,a._)("ul",i,[(0,a._)("li",{class:(0,o.C_)(["page-item",{disabled:!l.pages.has_pre}])},[(0,a._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,s.iM)((e=>m.updatePage(l.pages.current_page-1)),["prevent"]))},c)],2),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.pages.total_pages,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"page-item",key:e},[(0,a._)("a",{class:(0,o.C_)(["page-link",{active:e===l.pages.current_page}]),href:"#",onClick:(0,s.iM)((t=>m.updatePage(e)),["prevent"])},(0,o.zw)(e),11,r)])))),128)),(0,a._)("li",{class:(0,o.C_)(["page-item",{disabled:!l.pages.has_next}])},[(0,a._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,s.iM)((e=>m.updatePage(l.pages.current_page+1)),["prevent"]))},u)],2)])])}var h={props:["pages"],methods:{updatePage(e){this.$emit("emit-page",e)}}},g=l(89);const _=(0,g.Z)(h,[["render",m]]);var b=_},3734:function(e,t,l){l.r(t),l.d(t,{default:function(){return Ie}});var a=l(3396),o=l(7139);const s={class:"text-end"},d={class:"table mt-4"},i=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{width:"90"},"分類"),(0,a._)("th",null,"產品名稱"),(0,a._)("th",{width:"100",class:"d-none d-md-table-cell"},"原價"),(0,a._)("th",{width:"100",class:"d-none d-md-table-cell"},"售價"),(0,a._)("th",{width:"80"},"是否啟用"),(0,a._)("th",{width:"110"},"編輯")])],-1),n={class:"d-none d-md-table-cell"},c={class:"d-none d-md-table-cell"},r={key:0,class:"text-success"},p={key:1,class:"text-muted"},u={class:"text-end"},m={class:"btn-group"},h=["onClick"],g=["onClick"],_={key:0},b=(0,a._)("td",{colspan:"6",class:"text-center py-3"},"目前尚無商品",-1),f=[b];function y(e,t,l,b,y,P){const v=(0,a.up)("LoadingComp"),w=(0,a.up)("PaginationComp"),k=(0,a.up)("ProductModal"),x=(0,a.up)("DelModal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(v,{active:y.isLoading},null,8,["active"]),(0,a._)("div",s,[(0,a._)("button",{class:"btn btn-primary",type:"button",onClick:t[0]||(t[0]=e=>P.openModal(!0))},"新增產品")]),(0,a._)("table",d,[i,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(y.products,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id},[(0,a._)("td",null,(0,o.zw)(t.category),1),(0,a._)("td",null,(0,o.zw)(t.title),1),(0,a._)("td",n,(0,o.zw)(e.$filters.currency(t.origin_price)),1),(0,a._)("td",c,(0,o.zw)(e.$filters.currency(t.price)),1),(0,a._)("td",null,[t.is_enabled?((0,a.wg)(),(0,a.iD)("span",r,"啟用")):((0,a.wg)(),(0,a.iD)("span",p,"未啟用"))]),(0,a._)("td",u,[(0,a._)("div",m,[(0,a._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:e=>P.openModal(!1,t)},"編輯",8,h),(0,a._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:e=>P.openDelModal(t)},"刪除",8,g)])])])))),128)),y.products.length?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("tr",_,f))])]),y.products.length?((0,a.wg)(),(0,a.j4)(w,{key:0,pages:y.pagination,onEmitPage:P.getProducts},null,8,["pages","onEmitPage"])):(0,a.kq)("",!0),(0,a.Wm)(k,{ref:"productModal",product:y.tempProduct,onEmitProduct:P.updateProduct},null,8,["product","onEmitProduct"]),(0,a.Wm)(x,{ref:"delModal",delItem:y.tempProduct,onDelItem:P.deleteProduct},null,8,["delItem","onDelItem"])],64)}var P=l(8707),v=l(9858),w=l(9242);const k=e=>((0,a.dD)("data-v-35ed403d"),e=e(),(0,a.Cn)(),e),x={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},U={class:"modal-dialog modal-xl modal-dialog-scrollable",role:"document"},M={class:"modal-content border-0"},C={class:"modal-header bg-primary text-white"},D={class:"modal-title"},$=k((()=>(0,a._)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),V={class:"modal-body"},I={class:"row"},Z={class:"col-sm-4"},j={class:"mb-1"},z={for:"image",class:"form-label"},F={class:"mb-3"},L={for:"customFile",class:"form-label"},E=k((()=>(0,a._)("i",{class:"fas fa-spinner fa-spin"},null,-1))),N=k((()=>(0,a._)("hr",null,null,-1))),T={class:"mb-1"},H={for:"image0",class:"form-label"},O={class:"mb-1"},S={for:"image1",class:"form-label"},W={class:"mb-3"},Y={for:"image2",class:"form-label"},q=k((()=>(0,a._)("hr",null,null,-1))),K={class:"mb-1"},A={for:"date0",class:"form-label"},B={class:"mb-1"},G={for:"date1",class:"form-label"},J={class:"mb-3"},Q={for:"date2",class:"form-label"},R={class:"col-sm-8"},X={class:"mb-3"},ee={for:"title",class:"form-label"},te={class:"row gx-2"},le={class:"mb-3 col-md-4"},ae={for:"location",class:"form-label"},oe={class:"mb-3 col-md-4"},se={for:"category",class:"form-label"},de={class:"mb-3 col-md-4"},ie={for:"unit",class:"form-label"},ne={class:"row gx-2"},ce={class:"mb-3 col-md-6"},re={for:"origin_price",class:"form-label"},pe={class:"mb-3 col-md-6"},ue={for:"price",class:"form-label"},me=k((()=>(0,a._)("hr",null,null,-1))),he={class:"mb-3"},ge={for:"description",class:"form-label"},_e={class:"mb-3"},be={for:"content",class:"form-label"},fe={class:"mb-3"},ye={class:"form-check"},Pe={class:"form-check-label",for:"is_enabled"},ve={class:"modal-footer"},we=k((()=>(0,a._)("button",{type:"button",class:"btn btn-outline-light","data-bs-dismiss":"modal"},"取消",-1)));function ke(e,t,l,s,d,i){return(0,a.wg)(),(0,a.iD)("div",x,[(0,a._)("div",U,[(0,a._)("div",M,[(0,a._)("div",C,[(0,a._)("h5",D,[(0,a._)("span",null,(0,o.zw)(d.tempProduct.modalTitle)+"產品",1)]),$]),(0,a._)("div",V,[(0,a._)("div",I,[(0,a._)("div",Z,[(0,a._)("div",j,[(0,a._)("label",z,[(0,a.Uk)("輸入主要圖片網址 "),(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"image",placeholder:"請輸入圖片連結","onUpdate:modelValue":t[0]||(t[0]=e=>d.tempProduct.imgUrl=e)},null,512),[[w.nr,d.tempProduct.imgUrl]])])]),(0,a._)("div",F,[(0,a._)("label",L,[(0,a.Uk)("或 上傳圖片 "),E,(0,a._)("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:t[1]||(t[1]=(...e)=>i.uploadFile&&i.uploadFile(...e))},null,544)])]),N,(0,a._)("div",T,[(0,a._)("label",H,[(0,a.Uk)("新增圖一 "),(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"image0",placeholder:"新增圖一","onUpdate:modelValue":t[2]||(t[2]=e=>d.images.image0=e)},null,512),[[w.nr,d.images.image0]])])]),(0,a._)("div",O,[(0,a._)("label",S,[(0,a.Uk)("新增圖二 "),(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"image1",placeholder:"新增圖二","onUpdate:modelValue":t[3]||(t[3]=e=>d.images.image1=e)},null,512),[[w.nr,d.images.image1]])])]),(0,a._)("div",W,[(0,a._)("label",Y,[(0,a.Uk)("新增圖三 "),(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"image2",placeholder:"新增圖三","onUpdate:modelValue":t[4]||(t[4]=e=>d.images.image2=e)},null,512),[[w.nr,d.images.image2]])])]),q,(0,a._)("div",K,[(0,a._)("label",A,[(0,a.Uk)("日期一 "),(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"date0",placeholder:"日期一","onUpdate:modelValue":t[5]||(t[5]=e=>d.date.date0=e)},null,512),[[w.nr,d.date.date0]])])]),(0,a._)("div",B,[(0,a._)("label",G,[(0,a.Uk)("日期二 "),(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"date1",placeholder:"日期二","onUpdate:modelValue":t[6]||(t[6]=e=>d.date.date1=e)},null,512),[[w.nr,d.date.date1]])])]),(0,a._)("div",J,[(0,a._)("label",Q,[(0,a.Uk)("日期三 "),(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"date2",placeholder:"日期三","onUpdate:modelValue":t[7]||(t[7]=e=>d.date.date2=e)},null,512),[[w.nr,d.date.date2]])])])]),(0,a._)("div",R,[(0,a._)("div",X,[(0,a._)("label",ee,[(0,a.Uk)("標題 "),(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"title",placeholder:"請輸入標題","onUpdate:modelValue":t[8]||(t[8]=e=>d.tempProduct.title=e)},null,512),[[w.nr,d.tempProduct.title]])])]),(0,a._)("div",te,[(0,a._)("div",le,[(0,a._)("label",ae,[(0,a.Uk)("地點 "),(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"location",placeholder:"請輸入地點","onUpdate:modelValue":t[9]||(t[9]=e=>d.tempProduct.location=e)},null,512),[[w.nr,d.tempProduct.location]])])]),(0,a._)("div",oe,[(0,a._)("label",se,[(0,a.Uk)("分類 "),(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"category",placeholder:"請輸入分類","onUpdate:modelValue":t[10]||(t[10]=e=>d.tempProduct.category=e)},null,512),[[w.nr,d.tempProduct.category]])])]),(0,a._)("div",de,[(0,a._)("label",ie,[(0,a.Uk)("單位 "),(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"unit",placeholder:"請輸入單位","onUpdate:modelValue":t[11]||(t[11]=e=>d.tempProduct.unit=e)},null,512),[[w.nr,d.tempProduct.unit]])])])]),(0,a._)("div",ne,[(0,a._)("div",ce,[(0,a._)("label",re,[(0,a.Uk)("原價 "),(0,a.wy)((0,a._)("input",{type:"number",class:"form-control",id:"origin_price",placeholder:"請輸入原價","onUpdate:modelValue":t[12]||(t[12]=e=>d.tempProduct.origin_price=e)},null,512),[[w.nr,d.tempProduct.origin_price,void 0,{number:!0}]])])]),(0,a._)("div",pe,[(0,a._)("label",ue,[(0,a.Uk)("售價 "),(0,a.wy)((0,a._)("input",{type:"number",class:"form-control",id:"price",placeholder:"請輸入售價","onUpdate:modelValue":t[13]||(t[13]=e=>d.tempProduct.price=e)},null,512),[[w.nr,d.tempProduct.price,void 0,{number:!0}]])])])]),me,(0,a._)("div",he,[(0,a._)("label",ge,[(0,a.Uk)("產品描述 "),(0,a.wy)((0,a._)("textarea",{type:"text",class:"form-control",id:"description",placeholder:"請輸入產品描述","onUpdate:modelValue":t[14]||(t[14]=e=>d.tempProduct.description=e),style:{height:"100px"}},null,512),[[w.nr,d.tempProduct.description]])])]),(0,a._)("div",_e,[(0,a._)("label",be,[(0,a.Uk)("說明內容 "),(0,a.wy)((0,a._)("textarea",{type:"text",class:"form-control",id:"content",placeholder:"請輸入產品說明內容","onUpdate:modelValue":t[15]||(t[15]=e=>d.tempProduct.content=e),style:{height:"200px"}},null,512),[[w.nr,d.tempProduct.content]])])]),(0,a._)("div",fe,[(0,a._)("div",ye,[(0,a._)("label",Pe,[(0,a.wy)((0,a._)("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,id:"is_enabled","onUpdate:modelValue":t[16]||(t[16]=e=>d.tempProduct.is_enabled=e)},null,512),[[w.e8,d.tempProduct.is_enabled]]),(0,a.Uk)(" 是否啟用 ")])])])])])]),(0,a._)("div",ve,[we,(0,a._)("button",{type:"button",class:"btn btn-outline-primary",onClick:t[17]||(t[17]=t=>e.$emit("emit-product",d.tempProduct))},"確認")])])])],512)}var xe=l(1339),Ue={props:{product:{type:Object,default(){return{}}}},watch:{product(){this.tempProduct=this.product;const[e,t,l]=this.tempProduct.date;this.date.date0=e,this.date.date1=t,this.date.date2=l,this.tempProduct.images||(this.tempProduct.images=[]);const[a,o,s]=this.tempProduct.images;this.images.image0=a,this.images.image1=o,this.images.image2=s},date:{handler(){const e=Object.values(this.date);this.tempProduct.date=e},deep:!0},images:{handler(){const e=Object.values(this.images);this.tempProduct.images=e},deep:!0}},data(){return{modal:{},tempProduct:{modalTitle:"新增"},date:{date0:"",date1:"",date2:""},images:{image0:"",image1:"",image2:""}}},methods:{uploadFile(){const e=this.$refs.fileInput.files[0],t=new FormData;t.append("file-to-upload",e);const l="https://vue3-course-api.hexschool.io/api/7rong-api/admin/upload";this.$http.post(l,t).then((e=>{e.data.success&&(this.tempProduct.imgUrl=e.data.imgUrl)}))}},mixins:[xe.Z]},Me=l(89);const Ce=(0,Me.Z)(Ue,[["render",ke],["__scopeId","data-v-35ed403d"]]);var De=Ce,$e={data(){return{products:[],pagination:{},tempProduct:{},isNew:!1,isLoading:!1}},components:{ProductModal:De,DelModal:v.Z,PaginationComp:P.Z},inject:["pushMsgState"],methods:{getProducts(e=1){const t=`https://vue3-course-api.hexschool.io/api/7rong-api/admin/products?page=${e}`;this.isLoading=!0,this.$http.get(t).then((e=>{this.isLoading=!1,e.data.success&&(this.products=e.data.products,this.pagination=e.data.pagination)}))},openModal(e,t){this.tempProduct=e?{modalTitle:"新增",date:[],images:[]}:{...t,modalTitle:"編輯"},this.isNew=e;const l=this.$refs.productModal;l.showModal()},updateProduct(e){this.tempProduct=e;let t="https://vue3-course-api.hexschool.io/api/7rong-api/admin/product",l="post";this.isNew||(t=`https://vue3-course-api.hexschool.io/api/7rong-api/admin/product/${e.id}`,l="put");const a=this.$refs.productModal;this.$http[l](t,{data:this.tempProduct}).then((t=>{a.hideModal(),this.getProducts();const l=t;l.content=`已儲存商品「${e.title}」`,this.pushMsgState(l,"更新")}))},openDelModal(e){this.tempProduct={...e};const t=this.$refs.delModal;t.showModal()},deleteProduct(){const e=`https://vue3-course-api.hexschool.io/api/7rong-api/admin/product/${this.tempProduct.id}`,t=this.$refs.delModal;this.$http.delete(e).then((e=>{const l=e;l.content="已刪除商品",this.pushMsgState(l,"刪除"),t.hideModal(),this.getProducts()}))}},created(){this.getProducts()}};const Ve=(0,Me.Z)($e,[["render",y]]);var Ie=Ve}}]);
//# sourceMappingURL=734.f50ea46e.js.map