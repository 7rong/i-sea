"use strict";(self["webpackChunki_sea"]=self["webpackChunki_sea"]||[]).push([[677],{5677:function(t,e,r){r.r(e),r.d(e,{default:function(){return R}});var s=r(3396),l=r(9242),a=r(7139);const d={class:"container py-3"},i={class:"row gy-3 mt-3"},o={class:"col-md-8 mx-auto"},n={class:"position-relative m-4"},c=(0,s._)("div",{class:"progress",style:{height:"3px"}},[(0,s._)("div",{class:"progress-bar bg-primary",role:"progressbar",style:{width:"100%"},"aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"})],-1),u=(0,s._)("div",{class:"position-absolute top-0 start-0 translate-middle rounded-pill text-center bg-primary border border-2 border-primary",style:{width:"3rem",height:"3rem"}},[(0,s._)("i",{class:"bi bi-cart-check fs-3 text-white",style:{"line-height":"2.7rem"}})],-1),h=(0,s._)("div",{class:"position-absolute top-0 start-50 translate-middle rounded-pill text-center bg-primary border border-2 border-primary",style:{width:"3rem",height:"3rem"}},[(0,s._)("i",{class:"bi bi-pencil-square fs-3 text-white",style:{"line-height":"2.8rem"}})],-1),p={key:0,class:"position-absolute top-0 start-100 translate-middle rounded-pill text-center bg-muted border border-3 border-primary",style:{width:"3rem",height:"3rem"}},b=(0,s._)("i",{class:"bi bi-cash-coin fs-3 text-muted",style:{"line-height":"3rem"}},null,-1),_=[b],m={key:1,class:"position-absolute top-0 start-100 translate-middle rounded-pill text-center bg-primary border border-2 border-primary",style:{width:"3rem",height:"3rem"}},g=(0,s._)("i",{class:"bi bi-cash-coin fs-3 text-white",style:{"line-height":"3rem"}},null,-1),y=[g],w={key:0,class:"col-md-10 mx-auto border p-4 border-1 rounded-3 mt-5 bg-white"},v=(0,s._)("p",{class:"text-center text-muted fw-bold m-0"},"載入訂單錯誤，請稍後再試",-1),x=[v],k={key:1,class:"col-md-10 mx-auto border p-4 border-1 rounded-3 mt-5 bg-white"},f={class:"table align-middle"},z=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{style:{width:"150px"},class:"d-md-table-cell d-none"}),(0,s._)("th",null,"選購行程")])],-1),D={class:"text-secondary"},I={class:"d-md-table-cell d-none"},$={class:"row gy-2"},C={class:"col-12"},L={class:"text-secondary h6 mb-0"},O={class:"text-light"},M={class:"col-6"},S={class:"col-6 text-end"},j={colspan:"2",class:"text-end"},q={class:"table mb-0"},H=(0,s._)("th",{style:{"word-break":"keep-all"}},"訂單編號",-1),U=(0,s._)("th",null,"姓名",-1),W=(0,s._)("th",null,"Email",-1),Y={style:{"word-break":"break-all"}},E=(0,s._)("th",null,"Line ID",-1),K=(0,s._)("th",null,"電話",-1),T=(0,s._)("th",null,"付款狀態",-1),Z={key:0},A={key:1,class:"text-success"},B={class:"text-center"},F={colspan:"2",class:"border-0 p-0"},G={key:0,type:"submit",class:"btn btn-secondary mt-4 w-100"};function J(t,e,r,b,g,v){const J=(0,s.up)("LoadingComp"),N=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(J,{active:g.isLoading},null,8,["active"]),(0,s._)("div",d,[(0,s._)("div",i,[(0,s._)("div",o,[(0,s._)("div",n,[c,u,h,!1===g.order.is_paid?((0,s.wg)(),(0,s.iD)("div",p,_)):((0,s.wg)(),(0,s.iD)("div",m,y))])]),g.orderCatch?((0,s.wg)(),(0,s.iD)("div",w,x)):((0,s.wg)(),(0,s.iD)("div",k,[(0,s._)("form",{onSubmit:e[0]||(e[0]=(0,l.iM)(((...t)=>v.payOrder&&v.payOrder(...t)),["prevent"]))},[(0,s._)("table",f,[z,(0,s._)("tbody",D,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(g.order.products,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",I,[(0,s._)("div",{style:(0,a.j5)([{"background-size":"cover","background-position":"center",padding:"30% 0"},{backgroundImage:`url(${e.product.imgUrl})`}])},null,4)]),(0,s._)("td",null,[(0,s._)("div",$,[(0,s._)("div",C,[(0,s._)("p",L,(0,a.zw)(e.product.title),1),(0,s._)("small",O,(0,a.zw)(e.dateChosen),1)]),(0,s._)("div",M,(0,a.zw)(e.qty)+" / "+(0,a.zw)(e.product.unit),1),(0,s._)("div",S," TWD "+(0,a.zw)(t.$filters.currency(e.final_total)),1)])])])))),128))]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[(0,s._)("td",j,"總計： "+(0,a.zw)(t.$filters.currency(g.order.total))+" 元",1)])])]),(0,s._)("table",q,[(0,s._)("tbody",null,[(0,s._)("tr",null,[H,(0,s._)("td",null,(0,a.zw)(g.orderId),1)]),(0,s._)("tr",null,[U,(0,s._)("td",null,(0,a.zw)(g.order.user.name),1)]),(0,s._)("tr",null,[W,(0,s._)("td",Y,(0,a.zw)(g.order.user.email),1)]),(0,s._)("tr",null,[E,(0,s._)("td",null,(0,a.zw)(g.order.user.lineId),1)]),(0,s._)("tr",null,[K,(0,s._)("td",null,(0,a.zw)(g.order.user.tel),1)]),(0,s._)("tr",null,[T,(0,s._)("td",null,[g.order.is_paid?((0,s.wg)(),(0,s.iD)("span",A,"付款完成")):((0,s.wg)(),(0,s.iD)("span",Z,"尚未付款"))])])]),(0,s._)("tfoot",null,[(0,s._)("tr",B,[(0,s._)("td",F,[!1===g.order.is_paid?((0,s.wg)(),(0,s.iD)("button",G,"確認付款去")):((0,s.wg)(),(0,s.j4)(N,{key:1,to:"/products",class:"btn btn-secondary mt-4 w-100"},{default:(0,s.w5)((()=>[(0,s.Uk)("繼續看行程")])),_:1}))])])])])],32)]))])])],64)}var N={data(){return{order:{user:{},products:{}},orderId:"",isLoading:!1,orderCatch:!1}},inject:["pushMsgState"],methods:{getOrder(){const t=`https://vue3-course-api.hexschool.io/api/7rong-api/order/${this.orderId}`;this.isLoading=!0,this.$http.get(t).then((t=>{this.order=t.data.order,this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.orderCatch=!t.response.data.success}))},payOrder(){const t=`https://vue3-course-api.hexschool.io/api/7rong-api/pay/${this.orderId}`;this.$http.post(t).then((t=>{if(t.data.success){this.getOrder();const e={data:{}};e.data.success=t.data.success,e.content="期待與您相見的那天！",this.pushMsgState(e,"付款")}})).catch((t=>{const e={data:{}};e.data.success=t.response.data.success,e.data.message="系統錯誤，請稍後再試",this.pushMsgState(e,"付款")}))}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},P=r(89);const Q=(0,P.Z)(N,[["render",J]]);var R=Q}}]);
//# sourceMappingURL=677.89870148.js.map